!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FFmpegWASM=t():e.FFmpegWASM=t()}(self,()=>{var r={454:e=>{function t(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}t.keys=()=>[],(t.resolve=t).id=454,e.exports=t}},a={};function g(e){var t=a[e];if(void 0!==t)return t.exports;t=a[e]={exports:{}};return r[e](t,t.exports,g),t.exports}return g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const d="https://unpkg.com/@ffmpeg/core@0.12.9/dist/umd/ffmpeg-core.js";var l,e;(e=l=l||{}).LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT";const u=new Error("unknown message type"),L=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),O=(new Error("called FFmpeg.terminate()"),new Error("failed to import ffmpeg-core.js"));let D;self.onmessage=async({data:{id:t,type:e,data:r}})=>{const a=[];let s;try{if(e!==l.LOAD&&!D)throw L;switch(e){case l.LOAD:s=await(async({coreURL:e,wasmURL:t,workerURL:r})=>{var a=!D;try{e=e||d,importScripts(e)}catch{if(e&&e!==d||(e=d.replace("/umd/","/esm/")),self.createFFmpegCore=(await g(454)(e)).default,!self.createFFmpegCore)throw O}var s=e,t=t||e.replace(/.js$/g,".wasm"),r=r||e.replace(/.js$/g,".worker.js");return(D=await self.createFFmpegCore({mainScriptUrlOrBlob:s+"#"+btoa(JSON.stringify({wasmURL:t,workerURL:r}))})).setLogger(e=>self.postMessage({type:l.LOG,data:e})),D.setProgress(e=>self.postMessage({type:l.PROGRESS,data:e})),a})(r);break;case l.EXEC:s=(({args:e,timeout:t=-1})=>{D.setTimeout(t),D.exec(...e);t=D.ret;return D.reset(),t})(r);break;case l.FFPROBE:s=(({args:e,timeout:t=-1})=>{D.setTimeout(t),D.ffprobe(...e);t=D.ret;return D.reset(),t})(r);break;case l.WRITE_FILE:s=({path:m,data:F}=[r][0],D.FS.writeFile(m,F),!0);break;case l.READ_FILE:s=({path:f,encoding:R}=[r][0],D.FS.readFile(f,{encoding:R}));break;case l.DELETE_FILE:s=(c=[r["path"]][0],D.FS.unlink(c),!0);break;case l.RENAME:s=({oldPath:i,newPath:p}=[r][0],D.FS.rename(i,p),!0);break;case l.CREATE_DIR:s=(E=[r["path"]][0],D.FS.mkdir(E),!0);break;case l.LIST_DIR:s=(({path:e})=>{const t=D.FS.readdir(e),r=[];for(const a of t){const t=D.FS.stat(e+"/"+a),s=D.FS.isDir(t.mode);r.push({name:a,isDir:s})}return r})(r);break;case l.DELETE_DIR:s=(n=[r["path"]][0],D.FS.rmdir(n),!0);break;case l.MOUNT:s=(({fsType:e,options:t,mountPoint:r})=>{e=D.FS.filesystems[e];return!!e&&(D.FS.mount(e,t,r),!0)})(r);break;case l.UNMOUNT:s=(o=[r["mountPoint"]][0],D.FS.unmount(o),!0);break;default:throw u}}catch(e){return void self.postMessage({id:t,type:l.ERROR,data:e.toString()})}var o,n,E,i,p,c,f,R,m,F;s instanceof Uint8Array&&a.push(s.buffer),self.postMessage({id:t,type:e,data:s},a)}})(),{}});